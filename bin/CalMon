#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.dirname(__FILE__) + '/../lib')
#$PORT = 80

require 'rubygems'
require 'logger'
require 'optparse'
require 'CalMon'

def start_server
  CalMon::Server.new(:port => $PORT || 8999).start
end

class ParseOptions
  def self.parse(args)
    OptionParser.new do |opt|
      opt.on '-s', '--server', 'Start JsonRPC Server' do
        start_server
      end
      opt.on_tail '-h', '--help', 'Show Help' do
        puts opt
        exit
      end
      if args.size == 0
        start_server
      end
      opt.parse!
    end
  end
end

ParseOptions.parse ARGV

